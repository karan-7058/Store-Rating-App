
<% title = "Add User" %>

<div class="row">
  <div class="col-md-6 offset-md-3">
<h2 class="mb-4 offset-md-3">Add New User</h2>

<form method="POST" action="/admin/add-user" onsubmit="return validateForm()" class="card p-4 shadow-sm" style="max-width: 600px;">
  <div class="mb-3">
    <label>Name</label>
    <input name="name" id="name" class="form-control" placeholder="Full Name" required />
  </div>
  <div class="mb-3">
    <label>Email</label>
    <input name="email" id="email" class="form-control" placeholder="Email" required />
  </div>
  <div class="mb-3">
    <label>Address</label>
    <textarea name="address" id="address" class="form-control" placeholder="Address" required></textarea>
  </div>
  <div class="mb-3">
    <label>Password</label>
    <input name="password" id="password" type="password" class="form-control" placeholder="Password" required />
  </div>
  <div class="mb-3">
    <label>Role</label>
    <select name="role" id="role" class="form-select">
      <option value="user">User</option>
      <option value="storeowner">Store Owner</option>
      <option value="admin">Admin</option>
    </select>
  </div>
  <button class="btn btn-primary">Add User</button>
</form>

<a href="/admin/dashboard" class="btn btn-secondary mt-3 offset-md-3 ">⬅ Back to Dashboard</a>

</div>
</div>


<script>
function validateForm() {
  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const address = document.getElementById("address").value.trim();
  const password = document.getElementById("password").value;

  if (name.length < 20 || name.length > 60) {
    alert("Name must be between 20 and 60 characters.");
    return false;
  }

  if (address.length > 400) {
    alert("Address must not exceed 400 characters.");
    return false;
  }

  const passwordRegex = /^(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,16}$/;
  if (!passwordRegex.test(password)) {
    alert("Password must be 8–16 characters and include one uppercase letter and one special character.");
    return false;
  }

  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    alert("Invalid email format.");
    return false;
  }

  return true;
}
</script>
