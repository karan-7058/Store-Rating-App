
<% title = "all user" %>

<h2 class="mb-3">User List</h2>

<form class="row g-3 mb-4" method="GET" action="/admin/users">
  <div class="col-md-3">
    <input name="name" placeholder="Name" value="<%= filters.name || '' %>" class="form-control" />
  </div>
  <div class="col-md-3">
    <input name="email" placeholder="Email" value="<%= filters.email || '' %>" class="form-control" />
  </div>
  <div class="col-md-3">
    <input name="address" placeholder="Address" value="<%= filters.address || '' %>" class="form-control" />
  </div>
  <div class="col-md-2">
    <select name="role" class="form-select">
      <option value="">Role</option>
      <option value="user">User</option>
      <option value="admin">Admin</option>
      <option value="storeowner">Store Owner</option>
    </select>
  </div>
  <div class="col-md-1">
    <button class="btn btn-outline-primary w-100">Filter</button>
  </div>
</form>

<table class="table table-bordered table-striped">
  <thead class="table-light">
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Address</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td><%= user.address %></td>
        <td><%= user.role %></td>
        <td>
          <% if (user.role !== 'admin') { %>
          <form method="POST" action="/admin/users/<%= user._id %>/delete" onsubmit="return confirm('Are you sure you want to delete this user?');">
          <button class="btn btn-sm btn-danger">Delete</button>
         </form>
          <% } %>
        </td>

      </tr>
    <% }) %>
  </tbody>
</table>



<a href="/admin/dashboard">â¬… Back to Dashboard</a>
